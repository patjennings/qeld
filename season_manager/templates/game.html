{% extends "main.html" %}
{% load static %}
{% block title %}
{{game.game_title}} - {{game.game_date}}
{% endblock %}
{% block content %}

<div class="back">
    <a class="flex flex-row" href="/games"><img src="{% static 'assets/icons/calendar_month_dark.svg' %}" class="mr-1 h-6 w-6" />Retour</a>
</div>
<div class="game flex flex-col ">
    <div class="infos rounded-md bg-slate-800 text-white p-6 mb-4">
        <div class="datetime justify-center flex flex-col tablet:flex-row mb-4">
            <p class="text-base mr-2 flex flex-row text-slate-400"><img src="{% static 'assets/icons/clock.svg' %}" class="mr-1 h-6 w-6" /> {{game.game_date|date:"l d F Y"}} - {{game.game_time}}</p>
            <p class="text-base flex flex-row text-slate-400"><img src="{% static 'assets/icons/location.svg' %}" class="mr-1 h-6 w-6" />{{game.game_place}}</p>
        </div>
        <div class="title mb-4 flex flex-row items-center">
            <div class="team-home w-5/12 text-xl tablet:text-2xl text-right">Galactics</div>
            <div class="score mx-4 text-3xl tablet:text-5xl w-fit">10-0</div>
            <div class="team-away text-xl tablet:text-2xl w-5/12">Piliers Kernilis</div>
        </div>
        <div class="status flex flex-row justify-center mb-4">
            <div class="tag">À venir</div>
        </div>
        <div class="stats flex flex-col">
            <div class="goals-assists flex flex-row justify-center mb-6">
                <div class="goals w-1/2 tablet:w-1/4">
                    <div class="flex flex-row title mb-3"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" />Buts</div>
                    <div class="">
                        <p>Valentin Rey</p>
                        <p>Valentin Rey</p>
                        <p>Valentin Rey</p>
                    </div>
                </div>
                <div class="assists w-1/2 tablet:w-1/4">
                    <div class="flex flex-row title mb-3 pl-7"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" />Passes décisives</div>
                    <div class="">
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                    </div>
                </div>
            </div>
            <div class="cards flex justify-center">
                <div class="w-1/2">
                    <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" />Valentin Rey</p>
                    <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" />Valentin Rey</p>
                </div>
            </div>
        </div>
    </div>
    <div class="col flex flex-col tablet:flex-row gap-4"> 
        <div class="convocation-list w-full tablet:w-6/12">
            <div class="player flex answer-none flex-row px-4 py-3 bg-white rounded-md mb-1 items-center">
                <div class="flex grow">Christian Akono</div>
                <div class="actions flex flex-row w-fit items-center grow-0">
                    <a href="#" class="action--answer present"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" /></a>
                    <a href="#" class="action--answer absent"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" /></a>
                    <a href="#" class="action--answer staff"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" /></a>
                </div>
            </div> 
            <div class="player flex answer-ok flex-row px-4 py-3 bg-white rounded-md mb-1 items-center">
                <div class="grow flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" />Christian Akono</div>
                <div class="actions flex flex-row w-fit items-center grow-0">
                    <a href="#" class="action--answer present"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" /></a>
                    <a href="#" class="action--answer absent"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" /></a>
                    <a href="#" class="action--answer staff"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6" /></a>
                </div>
            </div>
        </div>
        <div class="col w-full tablet:w-3/12">
            <div class="answers-present card">
                    <div class="flex flex-row title mb-3 place-content-between">
                        <div class="flex flex-row title mb-3 font-bold text-slate-500">Buts</div>
                        <div class="compteur"><div class="tag">5</div></div>
                    </div>
                    <div class="">
                        <p>Valentin Rey</p>
                        <p>Valentin Rey</p>
                        <p>Valentin Rey</p>
                    </div>
            </div>
        </div>
        <div class="col w-full tablet:w-3/12">
            <div class="answers-absent card">
                <div class="flex flex-row title mb-3 place-content-between">
                    <div class="flex flex-row title mb-3 font-bold text-slate-500">Buts</div>
                    <div class="compteur"><div class="tag">5</div></div>
                </div>
                    <div class="">
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                        <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                    </div>
            </div>
            <div class="answers-staff card">
                <div class="flex flex-row title mb-3 place-content-between">
                    <div class="flex flex-row title mb-3 font-bold text-slate-500">Buts</div>
                    <div class="compteur"><div class="tag">5</div></div>
                </div>
                <div class="">
                    <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                    <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                    <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                    <p class="flex flex-row"><img src="{% static 'assets/icons/clock.svg' %}" class="h-6 w-6 mr-2" />Valentin Rey</p>
                </div>
            </div>
        </div>
    </div>
</div>




    <div class="h-96"></div>
<div class="game mb-4" href="#">
    <p class="text-3xl pb-1">{{game.game_title}}</p>
    <p class="text-base text-slate-500">{{game.game_date}}</p>
    <p class="text-base">{{game.game_score}}</p>
</div>
<div class="stats flex flex-row">
    <div class="flex flex-col mb-4 p-6 bg-slate-50 rounded-md">
    <div class="font-bold">Buteurs</div>
    <div class="flex flex-col">
        {% for striker in game_goals %}
        {% for i, player in players_list.items %}
        {% if i == striker %}
        <div>{{player}}</div>
        {% endif %}
        {% endfor %}
        {% endfor %}
    </div>
</div>
<div class="flex flex-col mb-4 p-6 bg-slate-50 rounded-md">
    <div class="font-bold">Passeurs</div>
    <div class="flex flex-col">
        {% for assist in game_assists %}
        {% for i, player in players_list.items %}
        {% if i == assist %}
        <div>{{player}}</div>
        {% endif %}
        {% endfor %}
        {% endfor %}
    </div>
</div>
</div>
<div class="poll">
    <div class="flex flex-wrap">
        {% for id, player in players_list.items %}
        {% if id in players_poll_done %}
        <div class="player p-3 bg-green-100 border border-green-300">
            {% else %}
            <div class="player p-3 bg-slate-100">
                {% endif %}
                <div class="meta">{{player}} </div>
                <div class="actions flex flex-row">
                    <a class="button" href="http://{{request.get_host}}/poll_answer/{{game.game_poll_id}}?player={{id}}&poll={{game.game_poll_id}}&game={{game.id}}&status=present">Présent</a> 
                    <a class="button" href="http://{{request.get_host}}/poll_answer/{{game.game_poll_id}}?player={{id}}&poll={{game.game_poll_id}}&game={{game.id}}&status=absent">Absent</a> 
                    <a class="button" href="http://{{request.get_host}}/poll_answer/{{game.game_poll_id}}?player={{id}}&poll={{game.game_poll_id}}&game={{game.id}}&status=audience">Staff</a> 
                </div> 
                <div class="actions_stat flex flex-col">
                    <div class="">
                        <p class="">But</p>
                        <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_goals&method=add">+</a> 
                        <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_goals&method=remove">-</a> 
                    </div>
                    <div class="">
                        <p class="">Passe décisive</p>
                        <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_assists&method=add">+</a> 
                        <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_assists&method=remove">-</a> 
                    </div>
                    <div class="">
                        <div class="">
                            <p class="">Carton rouge</p>
                            <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_redcards&method=add">+</a> 
                            <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_redcards&method=remove">-</a> 
                        </div>
                        <p class="">Carton jaune</p>
                        <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_yellowcards&method=add">+</a> 
                        <a class="button" href="http://{{request.get_host}}/game/{{game.id}}/update_game_stats/?player={{id}}&game={{game.id}}&field=game_yellowcards&method=remove">-</a> 
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="flex">
            <div class="bg-slate-200 rounded-md p-4">
                <div class="title pb-4">Joueurs présents</div>
                <div class="content">
                    {% for id, player in poll_present.items %}
                    <div class="">{{player}}</div> 
                    {% endfor %}
                </div>
            </div>
            <div class="bg-slate-200 rounded-md p-4">
                <div class="title pb-4">Joueurs absents</div>
                <div class="content">
                    {% for id, player in poll_absent.items %}
                    <div class="">{{player}}</div> 
                    {% endfor %}
                </div>
            </div>
            <div class="bg-slate-200 rounded-md p-4">
                <div class="title pb-4">Staff</div>
                <div class="content">
                    {% for id, player in poll_audience.items %}
                    <div class="">{{player}}</div> 
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endblock %}
